package main

import (
	"database/sql"
	"fmt"
	"log"
	"net/http"

	"github.com/codeedu/codebank/infrastructure/repository"
	"github.com/codeedu/codebank/usecase"
)

// "database/sql"
// "fmt"
// "log"

// "github.com/codeedu/codebank/domain"
// "github.com/codeedu/codebank/infrastructure/repository"
// "github.com/codeedu/codebank/usecase"
// _ "github.com/lib/pq"

func main() {

	http.HandleFunc("/", SATAM)
	http.ListenAndServe(":8000", nil)

	// db := setupDb()
	// defer db.Close()

	// cc := domain.NewCreditCard()
	// cc.Number = "1234"
	// cc.Name = "Wesley"
	// cc.ExpirationYear = 2021
	// cc.ExpirationMonth = 7
	// cc.CVV = 123
	// cc.Limit = 1000
	// cc.Balance = 0

	// repo := repository.NewTransactionRepositoryDb(db)
	// err := repo.CreateCreditCard(*cc)
	// if err != nil {
	// 	fmt.Println(err)
	// }
}
func SATAM(w http.ResponseWriter, r *http.Request) {
	w.Write([]byte("<style> body {  background-image: url(\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBYVFRgVFRUYGBgYGRgcGBgYHBgYGBgaGRgZGhocGBgcIS4lHB4rIRwYJjgmKy8xNTU1GiQ7QDs0Py40NTEBDAwMEA8QHxISHzQrJCs0ND80NDQ0NDQ0NjQ0NDE0NDQ0NDQ2NDQ0NDQ3NjQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NP/AABEIASwAqAMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAABAgADBAUGB//EAD0QAAEDAgMFBQYEBAYDAAAAAAEAAhEDIQQSMUFRYXGRBSKBobEGEzLB0fBCUnLhI2Ky8QcUM5KiwhWCg//EABoBAAMBAQEBAAAAAAAAAAAAAAABAgMEBQb/xAArEQACAgEDAwQBAwUAAAAAAAAAAQIRAwQSITFBURMyYXEFIiOBFDORobH/2gAMAwEAAhEDEQA/APnACYBQBSTYbDN/lC4up9VxHqFt9DpqmASNaZduMfNWBqllwTa5XkGXiiGohSCps0UV4Bl4owpB2+SMcUDS+CAKQjlUyoKr4AojlUhAV8AhDKmhBKwaQISwnQhMlxQkIZU5QhOyHETLxVdZ8AlWuCyYt3d6rSCtnLnlsg6HFQZc14hRV4QyyNxIjzUVOkzni5zimmuhppVMxI3GPv72JKuIykBwsRqJ37lirPLHkgxO8zPPVahXD2mNQ24id+nC6exJ32J/qnKLjdST/hmihVa7QgxqrVyMFVDXCTM2PjtXYUZIbXwdmj1HrQ/V1XWiQoAUQiSsjtVAhGFAVJQPgKEIylLkA2ElFJKaUAnZJSlElLKBSYSUECVEURZEEyUoEyuobLn4mtPd3arXiTlbzXIdrqurHFVZ4utytPb/AJOj2f8AD4qI9n/B4n0Cizye46dMl6USqp/FGozNkRv5KUmZCCCCdC3XXZzWZzSHGDobEEJ3YhxkSACZMWnxXRt4pdDyvUV21z5HxVEDvN+E6a2O4+a6eGqy0E3tB5jVc2hiIMRY6gRG6VcIYZae6YkTMX1hRKNqmdWnyqE3OPR9V4+TpNPBEngqw/iI59ITB4XK0e1GafceeBUlTMFA4KaNb+QOcsb8YJytBJ8lZja2VpI105SubhcFUfcU6jm7S1pdy0W+LGmrZ5ev1ksclGHXudKhWzSYgC0q5jpuF08P7JY9zA8YJ+QjXu5oIHeDJnYNFxsPTc1pzD8RAnXQHpceaeTGkrROk1kpS2y5L3OSZlCVUXLJI9CU6LMyIcqi5Frk9pCycloKgSgpa1TK0nbs5pJWypZFFNvsYca4OMg6WOuxYcvFGDyShh4dQu2KpUfN5Z75bmupqo1YaQTvgc4+iKy5Dw6hBJpDWaSVEaSDKhE3A+i1Y6hBlsZdkEbPmsrBryKpO1ZlOLi9rAGnctNKqYgjZGixooasUZOL4OjhK5AIMjWDu5LfSrArgStWHrERzWcoWdmDVuNJ9jtZ1YHDesFGvoujSIO5c8oUezgzqfRmfEUM7XAG4aXc8ok+QK+h/wCF9VlN78O97RVaSC3MLubAOXfGll4N4seRHUQV3MfXw/ucS/KDVqljml18rnhrnFp/CQ4OE/yha4Zdjz/yWPnevB9mr9v4ajDalZgeZhgOZ5A1IY2XQN8L5N7R+zzMOzFvOYk4lgol3dAY9gqluXYf4hH/AMtkL6tSFJraL3tbnDGd6xglu3bPxX5r5H/iT2q5+LqU8592wsLW/hzmm0F0b4gf3K0yPiji0afqXdUeUcbLK599Uz626PW3Bc2vUus4wO/UalLobxUTNeua2qd6YVTGpVuBzR1R1mXETGm0/cKvGGQAN99qpw1YQSRp8lnxJEk5puQOU8FKhybZNSvT47/8M72mdpQyGNEmYoytjy7TJlO4oo5jCiApAzmNTrvQzHeUznHUaJc54dAgT+wFymc7yjnP3HooXnh0CYgvdpc6BLmKWUwcfuEBZobX13HitGHxl4vAFt9uCx0qZcYkDeTYAbyVuAw9MTmfVfsABp0hzd8bxwAbzUuKZrDJKLtM6uGh5AaJJ/vc6BZvftc9s3ZOUn4spBPeAGrSDcLkuxjy7MDGsBohokEGANLErqezLg6qynALnPaAHEBrgbOYZ0Jm2822hKMFF2bZ9XLLFRo+4ez72PpNZQNN7yG96mwtaxpAOZ0kgHlBtGq+Vf4hVaYxtUMuzujMDJzMbkdO/vN9SvX+1HtM7AUP8rh8rXOGVrwZLQbZo2O+a+UV3Z4ImAwRtNiRfjY9VTjZzxyOPQUOJ+Eh3LXpr0VFRxEgzNvBI6mVqoVnnulxLdzgHDwzTCKDe3wzGHnerXuc2Jt0QqmDYCDpYKPeRGmgMQNon5oJTruBtUzcymr1TIi1hw2Jffnc3oFDWJ1joEUPdxVlec7yna83Tsq3AIBHIIGqQdB4BAJ1zYged6iOc7h0UQF/IGbeA+YSAqwkbB1KWR9ymS0Q6TAjRICnkeCtJH5ItNySgCkO4BFro2DxRLgdR0geUIEt2A9R9ECNWFpZmPcbfA0bpcS70YVS2lqdwJ5kED1IW+kD/l2kWaK0neTk08A3/msBqyMo2gDzzHzQNkw1LM4NOhN/ASuhhcE05swkNyEi8kEkO04ecLNQIztA3O6lpXcw7LTtjqJB9QExF3tD2h/malNpBmm1jHPIE1X65nZSQCWgON9S7guZRoAvqwLAgeSsa7KwO2HMW8i49bQPBDsh0se7a5x+SAEZhJgc/VJVoZLrue6YxsF4neBK5PaNRoy7s23bDTu4wgZy6ojUAnW87ddCOCrzZpJAsBa+gtGvJWnvRPEuPD5JKlRo7rQI2kwSf/bd4JDKfeD8rf8Al9UwcL90W/V9US5v5T/uslzjdrrdAie8H5R5/VHOI+FQBt7G3EX8kS4RAB8SkNApQTEWKKAc3cev7KJcmsaS7CmNxnn+yLcu2fCFbVoFsTNwfvVZ01yZyTi6aH7vHyKmYDYdI1H0VY5owN6ZNh7vHyS2Rgb/ACUIGwoEb6z8tNjNzXOP6qmUf0sZ1WBhuOa09oU3Ne5rhBbDSN2UAfJUUokF0xtjVA2aMG4B5cdJgcybeQK6+JxMMOW0DYuEalxAgAzxneVobiSQQfsJolmrGYj+CwDY1o8lV2biIGXjJvCpxT+4xs3gW3WWRhI0QM9K/GsiXNnrI5QuP2hiAX90d0C0+qqbU0O0bFW8mc20R5ygC5tW0RF5JNzAEm3gFXVa0E62OltqYjvAdfU9VZXY0TLrug6WEEhIaMoy8eo+idzW2u4A8j9PREUmfn8v3QLWxGa+8AR6ygCHLeCb8BbzQyN/Mel/VQMb+byKL8ukmwjTakxojWs3nooiymDoT0/dRKzZJ10R3HUWxcbD5wb9Fw61KCdNSvQZxbnzWbGUGumRFpDrR9wscc6fJ6mu06auNcHE90eHUIikdSQPEK19EtkEibReN/3dU+6PDqF0HiNUQ0+I6/VbuxqTff0s7gGio0uMzDWnM42B2ArG6nYQZO2NnBXYIEOcbgtY87tWlvzQC6lWLq53vf8Amc50/qJO1Jm0H3dBms7ku1Ahh81Y5hCr28tfmr27BKaAqqmwVQK0VWnLNoBI43us4SYDhxhXspHI50i58e7BP9QWdaaRluX+Yk+IbpxsUDRnDiVoNMkCwEbSYkED9+qppi+vKJutLhmafzAiw0gh1+YPqEAigYcn8TeqFSiRtHgQicM7d5hM3CuMADZfcNdUDq+iKg2+o6p2Ui42grdSwJAvGadb8NyXAUrGRtCmUqRtDDJySfcmHoEaoraIQXM5uz18enio0aWkb9qhaNm03vOttvgmYFGtA8Pu0eKmLOvJC0c7GYXNzXKbTMiQdV6h7IzEm2ugkQNAdxg9Vl7Pp5m5naknlYx8l0RnweLn0zc6XV3/AKOHRol14tK1MZlFQ2Pc6S9gPr5rT2dSlpP8+y2gk+F02MGVj9ktAH+9h/6q93NHN6NQ3HF2I09b6BInpMLjA2qjAehUAkG4KcsAu0yPMLMQpCANGUEOJcAd2/ks60syGJaQNDlMnTW/os7o2IAINjxhaMFRLyWiNCb8FlWvs7N7wZTBvHTRJ9CoJOSTKnAtcRoQSPNbcFSzB4I2tM7iM27x6KjtBp96ZEEkEjcSAfmuh2FJzDYIidhJ2c48kpOo2a4se7Ls+zN/46TEx5wt9Ls+CS10TEgyR6/VbCy6tyrKU/B6OLSRV2jOWLndnj4/1fVdWpAk7p8lyOzL5zvIPqkncWXKG3LBfZuAURIEaKLA9NLjoiNt5acbX4K/KFQ3mrmDiUrGo3wJjhFNxv8ACfu6OCtSadbF1uMlJjz/AA3X2dbjcrMJ/pt5N9Frf6f5ORwT1DrwZOy6Xc7w1cSOkT6pe1Kf8Nx2hzfOV0nBBuE96HsDS45HuaBY5mNJB5a9VUZ3IwzaZRwteF1PHpmuhdjGezOJpM95UpFrZ/M0m8D4QSdSFz8GcrwcxbEyRIMQZFr30XSeHTKZBVppEiW3TYemLmRw2eqvdRLTLYG8fhdyQIxGkSJF413jmFUus2oMwJbBuC063aR0WDFUsrtkG4jSEAULZ2X/AKrP1t8zCygSVv7EYHV2AmO9rtsCk+heP3L7Le1KLjVe6C1s2LgQDFrE66LV2C2GukRmylvES4EjhIjwX3rsyiwMq0SwEscxjmmC056THtEG0DPHgvmPtRgWUK+Sm0NZkDg0aNzOeXBo2CZMbJjSAsskqjR6Oix79Ru+2cVwuiAErilJO9c9ntbEndAqtsRvkLndnDunSZPDcug4cfRYqNMgumwm0bdVSl+lo5smP92Mq8lzh93USuHEqKDp/gLSrmuVAKYOUlRYMWxzhlF5InYtDBlAANgANuxIHpg9VudUKOOKm592MSup7PVB7wsIPfaGSPw5nsv5ALkFyfC4p1N7Xt1Y4OA2GDN04OmTni5QcUem9oMa99GoDAGdoaNSWS0h3mBzkLxGKwskutMGdgNo1Okb+C9T2x2hSqUwWfE4Na4GcwLMvhB18DGgXn80X3fem1audStHnYdNuwtSVO2cXCO2bzw8Ve7blA5aSqKdPLVymLOcDGlp04LVievBdJ4tGY4mCJBtqCAY5SrnYfO2Wlrv9wcPCYWGryI5lGjUI0KCSt7CDBEFeg7Fw4JbVMAhwv8AEDESSAbH72ri16ubXXxleg7KEUwbyZzTHhEaiI8ZWeWW2PB2aHFHJlSl0PsPs52w17q9bK4U3VRBI/DQw7AXESSASB4uA1XhPbPGsq4klmjGMYSNC5pcSR1XOZ2o9rDTY5zA4Q7KTdubNA/L3rmImGzouaXLnnPdFI9rT6T0sjm/pL4GLkspcyBcsjsfIziq3OUc5IXJkNkM/f8AdRAqJkklEFVgpgU6EpFocoHJAiCpNEx5QQKjXA6FILV0MlITSgUWNpHL7SEVpAjMGnq0T5ynlJ2se80/y+hPyhBp18V3xdxTPlsy25ZR+WZK4uY8UKdIukjYrInORsA/qbKmHdlMjjKZg0Uu4/uvSdnGKTOR9SvO1nSV6DAu/hs5fMrLN7T0vxf91/Rc5yQlF7lVmXJR77kEuSkoEqFyZDkiEqEoSlcU6IckElRKoqIsWUwcqmuTAptGamWhyLXKsJwEjVSbHDkwKqZEnw9P7qwKWqLhLcr+wqEowodJ3KS2zN2nQBp5h8TXGf0kCehjqVzWvsZ+7LrYmoGtBcCWzBAMEhzXAiVw3GwXZi9p89r0lmbXctwvwv8A0/8AZqoBXQ7DcBVEtDm/iB0IBBIPAxHisWIp5XuafwuI6GFourRzSj+2pfaKpXosE8FjbiY0BE2tp4LzoXp8DTBptMQYvpyWWb2nb+Mv1HXgVxvwjzSErS6mqnNXKe5TKylLgLkqwtSuZKaFJOuBJQJTlLCZnyLKieEEwoyB4VjXDeswYEQwLVpHnRnLwjXmEeHorGlYw1O0KGkdEMkr5RqyjUgbPX904YNwWUAcepTkTrPUqWvk2jN+EXuY2QI1+if3LdwWT3Y3eZVrbW+ZQ/hlR5btIzdrZcoAAmbxsAH7+S5TwQYOotG5drEWBcAJ2E3i+t+S4jl04ncTw9fBxy35On2MGy4ujQRPE/sj25TPvMxN3AG+pEQDfUW1WXs8AuvuK6XtCXOLJgtp0qbW7w0sa4Anbdzh/ZC94Sd6VKujfJx6DMxA36c5XqWvaGgAjugDoFwOzaJkO2CfHZ810XNG4LPM7dHZ+OhKMXKupq7saC4VZLRu2LMWjcEuWLQsaR6O+S7I2GOCqc1pPE8Y47Flc1LHBUo/JnLM3w0jWWN3JCwLMUJTUfkh5V4RpsosjkU9pn63wVhEFAKAqzmTLAUwKqCcFS0axkWApwVWEzSoZvGRYEyQFEFI2TJX+E8p6XXFqC5XaqnunkfRcV5W+HozyvyXuX0aOzvj8D6Ld27pRMzNMzvltSo0T4AAclgwMhwds0PjZaO27VcumRrW7dcoLjfiSrr9d/Bzb1/T7e9mnAsik0zq51uUD69FaSqMG45SCCILSJ3ObPnY+KtK58nuZ62kkvRRCkKJKQlJG0mQoFQlKU0YyYClKJKQlWjKTISogVEzOwKSgogzsYFMCklEFBakWApwVU0pmlS0axkWtKYFVgpgVDRvGRYuK+xjcuyFzsdTh07DcfNa4ny0cX5CNxT8FDHEGy3YquA9ziJzBrhMmXRqbjeVzwusGmxBLTlykja1zYI8ZK1k1HqcOLE8iaj1QcKTlkmcziZOuwX6KwlKBAAGgUJXNJ27PaxR2QUfAHFKVCUhKEhSkElKSgXJSVSRlKQSUpKhKUlUZSkFRBRBFiopQUUybGRCVFIaYwKYFVhMCg0UiwFOCqgUwKlo2jItBVOLw8guGzURsGUE8PiaPELRQpOe4NaJJ3eZ5K3tfGUm0xRo94yDUqQe8Wkw1k/hkk8YCrGubMNZOOza+pw6dMkwAfVdF1rDQI0XsaBlhxc0Sfyn8Qi3enmL8orqm6qfLow0yUYuXcspOCZxWUFXzIlZtHbDJaohKQlQlKSmkTKRCUJUJQTMmyIKIJkNhUSqICyKIKJk2MikRlIpMdQFLKKBpjgpgVWCmlKjSMjVhsT7t2aA62hEg8xut5rC2plmC1xLcpJbJbOuXMLHZOo2KPdKRXF0jlzR3u0AAk2BnfvO8q2UjSpKG7CCUUMnpu2KqVGuulRop0y4lKSiUpUo0bCggoSmTZJQQUTJsiiiiCSIKKIEFRBRABTApUUFJjSkc5ByVNImU30DKkoKJ0RYZUlAqICwyoUFCgTY7H7ESVWnCTRcZtqiSooEEirIooogQVFFEDP/2Q==\"); background-repeat: repeat } h1 {color:red}</style><h1 style=\"text-align: center\"> Imers√£o Full Cycle </h1>"))
}

func setupTransactionUseCase(db *sql.DB) usecase.UseCaseTransaction {
	transactionRepository := repository.NewTransactionRepositoryDb(db)
	useCase := usecase.NewUseCaseTransaction(transactionRepository)
	return useCase
}

func setupDb() *sql.DB {
	psqlInfo := fmt.Sprintf("host=%s port=%s user=%s password=%s dbname=%s sslmode=disable",
		"db",
		"5432",
		"postgres",
		"root",
		"codebank",
	)
	db, err := sql.Open("postgres", psqlInfo)
	if err != nil {
		log.Fatal("error connection to database")
	}
	return db
}
